# Laravel Boilerplate (PHP-FPM + Nginx Unix Socket + External PostgreSQL + External Redis Cluster)

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π **boilerplate** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è Laravel-–ø—Ä–æ–µ–∫—Ç–æ–≤ —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ **–≤–Ω–µ—à–Ω–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π** (–ë–î –∏ Redis –Ω–µ –ø–æ–¥–Ω–∏–º–∞—é—Ç—Å—è –≤ Docker Compose).

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

*   **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** —Å–≤—è–∑—å –º–µ–∂–¥—É Nginx –∏ PHP-FPM –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ —á–µ—Ä–µ–∑ **Unix Socket**.
*   **External infra friendly:** **PostgreSQL –∏ Redis Cluster ‚Äî –≤–Ω–µ—à–Ω–∏–µ**, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.
*   **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:** –Ω–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥ –≤ `Makefile` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –∏ Laravel.
*   **Xdebug:** –≥–æ—Ç–æ–≤ –∫ –≤–∫–ª—é—á–µ–Ω–∏—é –æ–¥–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤ `.env`.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

*   `docker/` ‚Äî Docker-—Ñ–∞–π–ª—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è PHP –∏ Nginx.
*   `docker-compose.yml` ‚Äî –±–∞–∑–æ–≤—ã–π app-—Å–∫–µ–ª–µ—Ç (php+nginx).
*   `docker-compose.dev.yml` ‚Äî dev-–Ω–∞–¥—Å—Ç—Ä–æ–π–∫–∏ (ports, bind-mount, node/vite).
*   `docker-compose.prod.yml` ‚Äî prod-–Ω–∞–¥—Å—Ç—Ä–æ–π–∫–∏ (image + migrate one-off).
*   `SETUP.md` ‚Äî –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ boilerplate –≤ –≤–∞—à Laravel –ø—Ä–æ–µ–∫—Ç.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1.  –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç Laravel: `composer create-project laravel/laravel .`
2.  –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã boilerplate –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞.
3.  –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `.env` (–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ **–≤–Ω–µ—à–Ω–µ–º—É PostgreSQL** –∏ **–≤–Ω–µ—à–Ω–µ–º—É Redis Cluster**).
4.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ:
    ```bash
    make setup
    ```

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:
*   –°–∞–π—Ç: [http://localhost](http://localhost)

---

## üìÇ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (PostgreSQL)

–ò–¥–µ—è: –æ–¥–∏–Ω PostgreSQL-—Å–µ—Ä–≤–µ—Ä –Ω–∞ VPS, –Ω–æ –æ—Ç–¥–µ–ª—å–Ω–∞—è –±–∞–∑–∞ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.

### 1) –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ Postgres** –ø–æ–¥ –∞–¥–º–∏–Ω–æ–º.
2. **–°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**:
   ```sql
   CREATE ROLE app1_user WITH LOGIN PASSWORD '<PASSWORD>';
   ```
3. **–°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É** –∏ –Ω–∞–∑–Ω–∞—á—å—Ç–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞:
   ```sql
   CREATE DATABASE app1_db OWNER app1_user;
   ```
4. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
   ```sql
   REVOKE ALL ON DATABASE app1_db FROM PUBLIC;
   GRANT CONNECT ON DATABASE app1_db TO app1_user;
   ```

### üîå –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Laravel (.env)

```dotenv
DB_CONNECTION=pgsql
DB_HOST=localhost
DB_PORT=7031
DB_DATABASE=app1_db
DB_USERNAME=app1_user
DB_PASSWORD=<PASSWORD>
```

–ü–æ—Å–ª–µ –ø—Ä–∞–≤–∫–∏ `.env` –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
php artisan config:clear
php artisan migrate
```

### üß∞ –ï—Å–ª–∏ –≤ PhpStorm/DataGrip –Ω–µ –≤–∏–¥–Ω–æ —Ç–∞–±–ª–∏—Ü

–ï—Å–ª–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–æ—à–ª–∏, –Ω–æ –≤ –¥–µ—Ä–µ–≤–µ –±–∞–∑—ã –ø—É—Å—Ç–æ:
1. –û—Ç–∫—Ä–æ–π—Ç–µ **Schemas‚Ä¶** (–≤ —Å–≤–æ–π—Å—Ç–≤–∞—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è).
2. –û—Ç–º–µ—Ç—å—Ç–µ —Å—Ö–µ–º—É **`public`**.
3. –ù–∞–∂–º–∏—Ç–µ **Apply / OK** –∏ —Å–¥–µ–ª–∞–π—Ç–µ **Refresh**.

---
–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ [SETUP.md](SETUP.md).